<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>web socket test</title>
    <style>
        
    </style>
</head>

<body>
    <p>端口号: <input value="9527" id="prot">
        <button onclick="openws()" >连接Ws</button>
    </p>
    <p>
        发送数据:<input value="测试一下" id="msgcon">
     <button id="send" onclick="sendmsg()">发送消息</button>
 </p>
   
    <ul id="ul"></ul>
    <script type="text/javascript">
       var ws = null
        function openws(argument) {
            // body...
              ws = new WebSocket('ws://127.0.0.1:'+ document.querySelector('#prot').value) 
              ws.onopen = function(e) {
                let dom = document.querySelector('#ul').innerHTML = '已经连接 ws://127.0.0.1:' + document.querySelector('#prot').value
            }

        }
       

        let dom = document.querySelector('#ul')
      
        function sendmsg() {
            let b = document.querySelector('#msgcon').value
            ws.send(b)
            let dom = document.querySelector('#ul')
            let d = document.createElement('li')
            d.innerHTML = '发送..' + new Date().toLocaleTimeString() + ' ->' + b
            dom.append(d)
        }

    </script>
</body>

</html>